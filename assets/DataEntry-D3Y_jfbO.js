import{j as e,u as w,r as a,S as k,A as C}from"./index-CaHIkhDx.js";import{C as u}from"./Card-BG9FVjm5.js";const l=({className:t="",variant:d="text",width:x,height:i})=>{const c="animate-pulse bg-slate-200",r={text:"rounded",circular:"rounded-full",rectangular:"rounded-md"},n={width:x,height:i};return e.jsx("div",{className:`${c} ${r[d]} ${t}`,style:n})},L=()=>{const{companies:t,addCompany:d,generateDna:x,removeCompany:i,aiStatus:c}=w(),[r,n]=a.useState(""),[g,o]=a.useState(!1),[h,j]=a.useState(0),[m,p]=a.useState(!1),[f,b]=a.useState(!0);a.useEffect(()=>{const s=setTimeout(()=>b(!1),600);return()=>clearTimeout(s)},[]);const N=()=>{r.trim()&&(d(r.trim()),n(""))},v=()=>{o(!0);let s=0;const y=setInterval(()=>{s+=10,j(s),s>=100&&(clearInterval(y),o(!1),p(!0),setTimeout(()=>p(!1),3e3))},200)};return f?e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsx(u,{title:"行业数据录入",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(l,{height:40}),e.jsx(l,{height:100})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden p-6",children:e.jsx("div",{className:"space-y-4",children:[1,2,3,4].map(s=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{width:"30%",height:24}),e.jsx(l,{width:"20%",height:24}),e.jsx(l,{width:"10%",height:24}),e.jsx(l,{width:"15%",height:32})]},s))})})]}):e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsx(u,{title:"行业数据录入",children:e.jsxs("div",{className:"flex flex-col space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-3",children:"* 录入企业 (输入名称或URL并回车)"}),e.jsxs("div",{className:"border border-gray-300 rounded-md p-2 flex flex-wrap gap-2 bg-white min-h-[50px]",children:[t.map(s=>e.jsxs("div",{className:"flex items-center bg-blue-50 text-blue-700 px-3 py-1 rounded-full text-sm border border-blue-100",children:[e.jsx("span",{className:"mr-2",children:s.name}),e.jsx("button",{onClick:()=>i(s.id),className:"text-blue-400 hover:text-blue-900 font-bold",children:"×"})]},s.id)),e.jsx("input",{type:"text",value:r,onChange:s=>n(s.target.value),onKeyDown:s=>{s.key==="Enter"&&N()},className:"flex-grow outline-none text-sm min-w-[150px]",placeholder:"输入企业名称..."})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"提示: 可以在此快速添加多家企业，或在下方表格管理。"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-3",children:"文件上传 (行业报告/白皮书)"}),e.jsx("div",{onClick:v,className:`border-2 border-dashed rounded-lg p-8 flex flex-col items-center justify-center transition-colors cursor-pointer ${m?"border-green-500 bg-green-50":"border-slate-300 bg-slate-50 hover:bg-slate-100"}`,children:g?e.jsxs("div",{className:"w-full max-w-xs",children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsx("span",{children:"上传中..."}),e.jsxs("span",{children:[h,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${h}%`}})})]}):m?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-10 h-10 text-green-500 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("p",{className:"text-sm text-green-700",children:"文件解析成功，已自动提取关键信息"})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-10 h-10 text-slate-400 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),e.jsx("p",{className:"text-sm text-slate-500",children:"点击上传行业报告 (.pdf, .docx)"})]})})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50 flex justify-between items-center",children:e.jsxs("h3",{className:"text-sm font-bold text-gray-700",children:["已录入企业列表 (",t.length,")"]})}),e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"企业名称"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"数据来源"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"DNA状态"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"操作"})]})}),e.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[t.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-6 py-10 text-center text-gray-400 text-sm",children:"暂无数据，请在上方添加企业。"})}),t.map(s=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:s.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.url}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:s.isGenerating?e.jsxs("span",{className:"flex items-center text-blue-600",children:[e.jsx(k,{size:"sm"})," ",e.jsx("span",{className:"ml-2",children:"生成中..."})]}):s.dna?e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"已生成"}):e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800",children:"未生成"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-3",children:[!s.dna&&!s.isGenerating&&e.jsx("button",{onClick:()=>x(s.id),className:"text-blue-600 hover:text-blue-900 disabled:opacity-50",disabled:c===C.GeneratingDna,children:"生成DNA"}),e.jsx("button",{onClick:()=>i(s.id),className:"text-red-600 hover:text-red-900",children:"移除"})]})]},s.id))]})]})]})]})};export{L as DataEntry};
